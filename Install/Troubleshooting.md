# Add nameserver

Edit `/etc/resolvconf/resolv.conf.d/head`
```shell
# Dynamic resolv.conf(5) file for glibc resolver(3) generated by resolvconf(8)
#     DO NOT EDIT THIS FILE BY HAND -- YOUR CHANGES WILL BE OVERWRITTEN
nameservers 8.8.8.8 8.8.8.4
```

# kubeadm [ERROR KubeletVersion]

Ref: [How to install specific version of Kubernetes?](https://stackoverflow.com/questions/49721708/how-to-install-specific-version-of-kubernetes)

## Check available version

```shell
$ curl -s https://packages.cloud.google.com/apt/dists/kubernetes-xenial/main/binary-amd64/Packages | grep Version | awk '{print $2}'
```

## Install specific version
```shell
$  apt-get install -qy kubelet=1.11.3-00 kubectl=1.11.3-00 kubeadm=1.11.3-00
```

# kubeadm reset

## Stuck on [reset] unmounting mounted directories in "/var/lib/kubelete"
Ref: [kubeadm blocks when removing managed containers](https://kubernetes.io/docs/setup/independent/troubleshooting-kubeadm/#kubeadm-blocks-when-removing-managed-containers)

```shell
$ # if you install NFS
$ apt-get autoremove nfs-common nfs-kernel-server 
$ # You can reboot after remove nfs package
$ systemctl restart docker.service
$ kubeadm reset
```

# Check Kubelet

## Check kubelet log

```shell
$ journalctl -f -u kubelet
```
## Check kubelet status

```shell
$ systemctl status kubelet.service
```

### Orphaned pod "XXX-XX-XX" found, but volume paths are still present on disk

```shell
$ rm -r /var/lib/kubelet/pods/xxx-xx-xx
```

# Pods stuck at terminating status
Ref: [Pods stuck at terminating status](https://stackoverflow.com/questions/35453792/pods-stuck-at-terminating-status)

```shell
$ kubectl delete pod NAME --grace-period=0 --force
```


# Drop table without delete database

ref: [drop-all-tables-in-postgresql](https://stackoverflow.com/questions/3327312/drop-all-tables-in-postgresql)

SQL query:

```sql
DROP SCHEMA public CASCADE;
CREATE SCHEMA public;
GRANT ALL ON SCHEMA public TO postgres;
GRANT ALL ON SCHEMA public TO public;
```

# Window engine
## samba need mount on `Z://`

# Docker

## Delete all container
```shell
$ docker rm $(docker ps -a -q)
```